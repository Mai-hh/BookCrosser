graph TD
    Start(开始) --> SelectInputMethod{选择录入方式}

    SelectInputMethod --> |手动录入| InputISBN[输入图书ISBN]
    InputISBN --> SearchMetadata{查询ISBN元数据}
    SearchMetadata --> |未找到| ManualInput[手动输入图书信息]
    SearchMetadata --> |找到| ConfirmMetadata[确认图书元数据]
    ManualInput --> ConfirmMetadata

    SelectInputMethod --> |ISBN扫描| ScanISBN[扫描图书ISBN条码]
    ScanISBN --> RetrieveMetadata[自动获取图书元数据]
    RetrieveMetadata --> ConfirmRetrievedMetadata[确认获取的图书元数据]

    ConfirmMetadata --> InputAdditionalInfo[补充图书附加信息]
    ConfirmRetrievedMetadata --> InputAdditionalInfo
    InputAdditionalInfo --> SelectCategory[选择图书分类]
    SelectCategory --> UploadCover{上传图书封面}
    UploadCover --> |是| ChooseCoverImage[选择封面图片文件]
    UploadCover --> |否| SkipCover[跳过上传封面]
    ChooseCoverImage --> ConfirmUpload[确认上传封面]
    ConfirmUpload --> ReviewBookInfo[检查图书信息]
    SkipCover --> ReviewBookInfo

    ReviewBookInfo --> ConfirmSubmit{确认提交}
    ConfirmSubmit --> |是| SaveBookRecord[保存图书录入记录]
    ConfirmSubmit --> |否| EditBookInfo[修改图书信息]
    EditBookInfo --> ReviewBookInfo
    SaveBookRecord --> NotifyUser[通知用户录入成功]
    NotifyUser --> End(结束)