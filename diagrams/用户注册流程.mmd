%%{
  init: {
    'theme': 'neutral'
  }
}%%
graph TD
    Start(开始) --> SelectRegister[点击注册按钮]
    SelectRegister --> InputEmail[输入电子邮箱地址]
    InputEmail --> CheckEmailFormat{检查邮箱格式}
    CheckEmailFormat --> |格式无效| ShowEmailError[提示邮箱格式错误]
    ShowEmailError --> InputEmail
    CheckEmailFormat --> |格式有效| CheckEmailUnique{检查邮箱是否已注册}
    CheckEmailUnique --> |已注册| ShowEmailRegistered[提示邮箱已注册]
    ShowEmailRegistered --> InputEmail
    CheckEmailUnique --> |未注册| InputPassword[输入密码]
    InputPassword --> CheckPasswordStrength{检查密码强度}
    CheckPasswordStrength --> |强度不足| ShowPasswordWeak[提示密码过于简单]
    ShowPasswordWeak --> InputPassword
    CheckPasswordStrength --> |强度符合| ConfirmPassword[再次输入密码确认]
    ConfirmPassword --> CheckPasswordMatch{检查两次输入是否一致}
    CheckPasswordMatch --> |不一致| ShowPasswordMismatch[提示两次输入不一致]
    ShowPasswordMismatch --> ConfirmPassword
    CheckPasswordMatch --> |一致| InputUsername[输入用户名]
    InputUsername --> CheckUsernameUnique{检查用户名是否已占用}
    CheckUsernameUnique --> |已占用| ShowUsernameTaken[提示用户名已被占用]
    ShowUsernameTaken --> InputUsername
    CheckUsernameUnique --> |未占用| InputCaptcha[输入验证码]
    InputCaptcha --> CheckCaptcha{检查验证码是否正确}
    CheckCaptcha --> |不正确| ShowCaptchaError[提示验证码错误]
    ShowCaptchaError --> InputCaptcha
    CheckCaptcha --> |正确| SubmitRegistration[提交注册信息]
    SubmitRegistration --> SendVerificationEmail[发送验证邮件到用户邮箱]
    SendVerificationEmail --> ShowRegistrationSuccess[显示注册成功提示信息]
    ShowRegistrationSuccess --> End(结束)