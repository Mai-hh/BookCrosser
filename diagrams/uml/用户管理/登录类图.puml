@startuml
skinparam classAttributeIconSize 0

class LoginActivity {
    - loginFragment: LoginFragment
    - loginViewModel: LoginViewModel
    + onCreate()
    + onLoginSuccess(token: String)
    + onLoginFailure(errorMessage: String)
}

class LoginFragment {
    - loginForm: LoginForm
    - loginViewModel: LoginViewModel
    + onCreateView()
    + onSubmitLogin()
    + showLoginSuccess()
    + showLoginFailure(errorMessage: String)
}

class LoginForm {
    - username: String
    - password: String
    + isValid(): Boolean
    + getUsername(): String
    + getPassword(): String
}

class LoginViewModel {
    - authenticationService: AuthenticationService
    + login(username: String, password: String)
    + onLoginSuccess(token: String)
    + onLoginFailure(errorMessage: String)
}

class AuthenticationService {
    - userService: UserService
    - jwtService: JWTService
    + authenticate(username: String, password: String): String
    - verifyCredentials(user: User, password: String): Boolean
    - generateToken(user: User): String
}

class UserService {
    - userRepository: UserRepository
    + getUserByUsername(username: String): User
}

class UserRepository {
    + findByUsername(username: String): User
}

class JWTService {
    - secretKey: String
    - expirationTime: Long
    + generateToken(user: User): String
    + validateToken(token: String): Boolean
}

class User {
    - id: Long
    - username: String
    - password: String
    - email: String
    - roles: List<Role>
}

class Role {
    - id: Long
    - name: String
}

LoginActivity ..> LoginFragment
LoginActivity ..> LoginViewModel

LoginFragment ..> LoginForm
LoginFragment ..> LoginViewModel

LoginViewModel ..> AuthenticationService

AuthenticationService ..> UserService
AuthenticationService ..> JWTService

UserService ..> UserRepository

User *--> "*" Role
@enduml